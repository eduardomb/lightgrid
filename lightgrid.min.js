(function(e){"use strict";function t(){var e=document&&document.documentElement.clientWidth,t=window.innerWidth;return e>t?e:t}e.fn.lightgrid=function(n){var r=e.extend({cols:3,hSpacing:10,vSpacing:10,selector:"div",aspectRatio:1,hBox:0,fluid:!1},n),i=r.vSpacing*2,s=r.hSpacing*2,o=this,u=(this.width()-(r.cols-1)*i)/r.cols,a=r.hBox?r.hBox:u*r.aspectRatio,f=e(r.selector,this),l=0,c=t(),h=function(e){l=Math.max(l,e.data("x")+e.data("rows")),e.css({position:"absolute",display:"block",width:e.data("cols")*(u+i)-i,height:e.data("rows")*(a+s)-s,left:e.data("y")*(u+i),top:e.data("x")*(a+s)})},p=function(){c!=t()&&(u=(o.width()-(r.cols-1)*i)/r.cols,a=r.hBox?r.hBox:u*r.aspectRatio,f.each(function(){h(e(this))}),c=t())},d=function(){var e={};return function(t,n,r){r||(r="noId"),e[r]&&clearTimeout(e[r]),e[r]=setTimeout(t,n)}}();return this.css("position")=="fixed"?(e.error("Grid objects can't have position: fixed on CSS."),this):(this.css("position")=="static"&&this.css("position","relative"),f.length?(f.each(function(){h(e(this))}),this.height(l*(a+s)),r.fluid&&(e(window).resize(function(){d(p,500)}),window.matchMedia("(orientation: portrait)").addListener(p)),this):this)}})(jQuery);
