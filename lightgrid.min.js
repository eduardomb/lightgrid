(function(e){"use strict";e.fn.lightgrid=function(t){var n=e.extend({cols:3,hSpacing:10,vSpacing:10,selector:"div",aspectRatio:1,hBox:0,fluid:!1},t),r=n.vSpacing*2,i=n.hSpacing*2,s=this,o=(this.width()-(n.cols-1)*r)/n.cols,u=n.hBox?n.hBox:o*n.aspectRatio,a=e(n.selector,this),f=0,l=function(e){f=Math.max(f,e.data("x")+e.data("rows")),e.css({position:"absolute",display:"block",width:e.data("cols")*(o+r)-r,height:e.data("rows")*(u+i)-i,left:e.data("y")*(o+r),top:e.data("x")*(u+i)})},c=function(){o=(s.width()-(n.cols-1)*r)/n.cols,u=n.hBox?n.hBox:o*n.aspectRatio,a.each(function(){l(e(this))})},h=function(){var e={};return function(t,n,r){r||(r="noId"),e[r]&&clearTimeout(e[r]),e[r]=setTimeout(t,n)}}();return this.css("position")=="fixed"?(e.error("Grid objects can't have position: fixed on CSS."),this):(this.css("position")=="static"&&this.css("position","relative"),a.length?(a.each(function(){l(e(this))}),this.height(f*(u+i)),n.fluid&&(e(window).resize(function(){h(c,500)}),window.matchMedia("(orientation: portrait)").addListener(c)),this):this)}})(jQuery);
