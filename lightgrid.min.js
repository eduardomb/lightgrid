!function(t){"use strict";function i(){var t=document&&document.documentElement.clientWidth,i=window.innerWidth;return t>i?t:i}var o=i();t.fn.lightgrid=function(n){var s=t.extend({cols:3,hSpacing:10,vSpacing:10,selector:"div",aspectRatio:1,hBox:0,fluid:!1},n),e=2*s.vSpacing,a=2*s.hSpacing,c=this,h=(this.width()-(s.cols-1)*e)/s.cols,d=s.hBox?s.hBox:h*s.aspectRatio,r=t(s.selector,this),u=0,l=function(t){u=Math.max(u,t.data("x")+t.data("rows")),t.css({position:"absolute",display:"block",width:t.data("cols")*(h+e)-e,height:t.data("rows")*(d+a)-a,left:t.data("y")*(h+e),top:t.data("x")*(d+a)})},f=function(){o!=i()&&(h=(c.width()-(s.cols-1)*e)/s.cols,d=s.hBox?s.hBox:h*s.aspectRatio,r.each(function(){l(t(this))}),o=i())},p=function(){var t={};return function(i,o,n){n||(n="noId"),t[n]&&clearTimeout(t[n]),t[n]=setTimeout(i,o)}}();return"fixed"==this.css("position")?(t.error("Grid objects can't have position: fixed on CSS."),this):("static"==this.css("position")&&this.css("position","relative"),r.length?(r.each(function(){l(t(this))}),this.height(u*(d+a)),s.fluid&&(t(window).resize(function(){p(f,500)}),window.matchMedia("(orientation: portrait)").addListener(f)),this):this)}}(jQuery);
